<div>
  <ng-container
    *ngIf="
      (applications$ | async)?.data?.applications?.length > 0;
      else noApplications
    "
  >
    <div
      *ngFor="let application of (applications$ | async)?.data.applications"
      class="container--default-x flex items-center py-4 space-x-8 border-b border-gray-300 even:bg-gray-200 even:bg-opacity-25 hover:bg-gray-50 hover:bg-opacity-100 relative"
      [ngClass]="[
        application.elimination
          ? 'text-gray-400 hover:text-black transition-colors'
          : ''
      ]"
    >
      <div
        class="flex-auto font-mono"
        [ngClass]="{ capitalize: anonymous }"
        [innerText]="
          anonymous
            ? application.internal_name
            : application.name || 'Untitled Application'
        "
      ></div>
      <div
        class="text-xxs bg-red-600 text-white px-2 rounded-full font-condensed font-medium uppercase"
        *ngIf="application.elimination as elimination"
        title="Eliminated
        {{ elimination.created_at | timePassed }} ago by
        {{ elimination.eliminated_by.name }}"
      >
        {{ "snippets.application-eliminated" | translate }}
        <span *ngIf="elimination.reason">: {{ elimination.reason }}</span>
      </div>
      <div
        class="text-center"
        *ngIf="application.ratings_aggregate?.aggregate?.avg?.value as rating"
        [ngSwitch]="true"
        [ngClass]="[
          application.ratings_aggregate?.aggregate?.stddev_samp?.value > 5
            ? 'text-red-800'
            : ''
        ]"
      >
        <div *ngSwitchCase="rating > 5" class="text-blue-700">[Yes]</div>
        <div *ngSwitchCase="rating === 5">[Maybe]</div>
        <div *ngSwitchCase="rating < 5">[No]</div>
        <div *ngSwitchDefault>â€“</div>
      </div>
      <div
        class="text-center font-mono py-1 px-4 rounded-lg bg-gray-200 hover:bg-blue-600 hover:text-white"
        [innerText]="application.ratings_aggregate?.aggregate?.count || 0"
      ></div>
      <div class="hover:text-blue-600">
        <svg
          width="25px"
          height="21px"
          viewBox="0 0 25 21"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
        >
          <g
            id="Page-1"
            stroke="none"
            stroke-width="1"
            fill="none"
            fill-rule="evenodd"
          >
            <path
              d="M1,2.87232347 L1,14.8541978 C1,15.8862995 1.83211783,16.7261893 2.85499785,16.7261893 L4.70966681,16.7261893 L4.70966681,21 L8.94392964,16.7261893 L22.1450021,16.7261893 C23.1675533,16.7261893 24,15.8862995 24,14.8541978 L24,2.87232347 C24,1.84022176 23.1675533,1 22.1450021,1 L2.85499785,1 C1.83211783,1 1,1.84022176 1,2.87232347 Z M18,9 L7,9 M18,6 L7,6 M15,12 L7,12"
              id="Stroke-2"
              stroke="currentColor"
            ></path>
          </g>
        </svg>
      </div>
      <a
        class="absolute inset-0"
        [routerLink]="[application.id]"
        routerLinkActive="router-link-active"
      ></a>
    </div>
  </ng-container>
  <ng-template #noApplications>
    <div class="my-1 h-80 flex items-center justify-center">
      <span
        class="text-gray-300"
        [innerText]="'snippets.no-applications' | translate"
      ></span>
    </div>
  </ng-template>
  <div class="container--default flex items-center">
    <!-- This example requires Tailwind CSS v2.0+ -->
    <!-- On: "bg-gray-600", Off: "bg-gray-200" -->
    <button
      (click)="toggleAnonymity()"
      type="button"
      aria-pressed="false"
      aria-labelledby="toggleLabel"
      [ngClass]="anonymous ? 'bg-green-600' : 'bg-red-600'"
      class="relative inline-flex flex-shrink-0 h-6 w-12 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-white-400"
    >
      <span
        class="sr-only"
        [innerText]="'snippets.hide-idenity' | translate"
      ></span>
      <!-- On: "translate-x-5", Off: "translate-x-0" -->
      <span
        aria-hidden="true"
        [ngClass]="[anonymous ? 'translate-x-6' : 'translate-x-0']"
        class="inline-block h-5 w-5 bg-white rounded-full shadow transform ring-0 transition ease-in-out duration-200"
      ></span>
    </button>
    <div
      class="ml-2 text-xs font-mono text-gray-800 leading-none"
      [innerText]="'defaults.anonymous' | translate | uppercase"
    ></div>
  </div>
</div>
