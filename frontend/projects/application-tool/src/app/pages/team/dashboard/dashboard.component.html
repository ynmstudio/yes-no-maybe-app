<div class="min-h-screen flex flex-col">
  <div
    class="container--default sticky top-0 inset-x-0 flex items-center justify-between z-10 backdrop-blur bg-white bg-opacity-80 border-b border-gray-200"
  >
    <!-- <div class="text-headline">
      {{
        "snippets.welcome-user"
          | translate: { user: (user$ | async)?.displayName || "â€¦" }
      }}
    </div> -->
    <div class="relative inline-block text-left">
      <div>
        <button
          (click)="toggleEditionSelect()"
          (blur)="showEditions = false"
          type="button"
          class="inline-flex justify-center w-full uppercase rounded-xl p-3 font-condensed text-sm leading-none focus:outline-none focus:ring-2 focus:ring-offset-0 focus:ring-gray-300 border-gray-300 border-opacity-50 bg-gray-200 hover:bg-gray-300 text-black"
          id="options-menu"
          aria-haspopup="true"
          aria-expanded="true"
        >
          <div [innerText]="(selectedEdition$ | async)?.name"></div>
          <!-- Heroicon name: solid/chevron-down -->
          <svg
            class="-mr-1 ml-2 h-4 w-4"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            aria-hidden="true"
          >
            <path
              fill-rule="evenodd"
              d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
              clip-rule="evenodd"
            />
          </svg>
        </button>
      </div>

      <!--
        Dropdown panel, show/hide based on dropdown state.

        Entering: "transition ease-out duration-100"
          From: "transform opacity-0 scale-95"
          To: "transform opacity-100 scale-100"
        Leaving: "transition ease-in duration-75"
          From: "transform opacity-100 scale-100"
          To: "transform opacity-0 scale-95"
      -->
      <div
        class="origin-top-left absolute left-0 mt-2 w-56 rounded-xl shadow-lg bg-white ring-1 ring-black ring-opacity-5"
        [ngClass]="[
          showEditions
            ? 'transition ease-out duration-100'
            : 'transition ease-in duration-75',
          showEditions
            ? 'transform opacity-100 scale-100'
            : 'transform opacity-0 scale-95'
        ]"
      >
        <div
          class="py-1"
          role="menu"
          aria-orientation="vertical"
          aria-labelledby="options-menu"
        >
          <button
            class="appearance-none w-full text-left flex justify-between items-center px-4 py-2 text-sm text-gray-800 hover:bg-gray-200 hover:text-gray-900 focus:outline-none"
            role="menuitem"
            *ngFor="let edition of (editions$ | async)?.data?.editions"
            [ngClass]="{
              'font-medium bg-gray-100':
                edition.id === (selectedEdition$ | async)?.id
            }"
            (click)="switchEdition(edition.id)"
          >
            <div [innerText]="edition.name"></div>
            <div
              class="relative"
              *ngIf="edition.id === (currentEdition$ | async)?.id"
            >
              <div
                class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"
              ></div>
              <div
                class="bg-red-600 rounded-full text-xs w-3 h-3 relative"
              ></div>
            </div>
          </button>
        </div>
      </div>
    </div>
  </div>
  <div class="flex-auto md:flex max-w-full">
    <!-- STATISTICS -->
    <div
      id="statistics"
      class="container--default flex-auto w-full md:flex-shrink"
      *ngIf="statistic$ | async as statisticObject"
    >
      <div class="lg:grid grid-cols-form gap-0 items-stretch">
        <div class="md:w-80 lg:w-96 flex flex-col">
          <div class="px-4 lg:px-6 pb-2">
            <div class="font-mono text-xs">
              {{
                statisticObject?.data?.applications_total?.aggregate?.count || 0
              }}
              {{
                (statisticObject?.data?.applications_total?.aggregate?.count ===
                1
                  ? "defaults.application-single"
                  : "defaults.application-multi"
                ) | translate
              }}
            </div>
          </div>
          <div class="flex-auto bg-gray-100 p-4 lg:p-6">
            <div
              class="flex w-full justify-between items-center border-b border-black pb-4 mb-4"
            >
              <div class="font-mono">Angelegt</div>
              <div class="text-3xl">
                {{
                  statisticObject?.data?.applications_untouched?.aggregate
                    ?.count
                }}
              </div>
            </div>
            <div
              class="flex justify-between items-center border-b border-black pb-4 mb-4"
            >
              <div class="font-mono">In Bearbeitung</div>
              <div class="text-3xl text-yellow-500">
                {{
                  statisticObject?.data?.applications_edited?.aggregate?.count
                }}
              </div>
            </div>
            <div class="flex justify-between items-center pb-4">
              <div class="font-mono">Abgeschlossen</div>
              <div class="text-3xl text-green-600">
                {{
                  statisticObject?.data?.applications_ready?.aggregate?.count
                }}
              </div>
            </div>

            <a
              [routerLink]="['..', 'applications']"
              class="inline-block mt-8 mb-4 bg-black text-white font-mono text-base leading-none py-3 px-6 rounded-xl"
              [innerText]="
                ('defaults.application-multi' | translate) + ' &rarr;'
              "
            ></a>
            <div class="aspect-w-1 aspect-h-1 bg-red-50 mt-4"></div>
          </div>
        </div>
        <div class="flex flex-col">
          <div class="flex justify-between px-4 lg:px-6 lg:pl-16 pb-2">
            <div
              class="font-mono text-xs"
              [innerText]="
                'statistics.top-ten'
                  | translate: { type: ('defaults.medium-multi' | translate) }
                  | uppercase
              "
            ></div>
            <div
              class="font-mono text-xs text-right"
              [innerText]="'defaults.percent' | translate | uppercase"
            ></div>
          </div>
          <div class="flex-auto bg-gray-100 p-4 lg:p-6 lg:pl-16">
            <div
              class="flex justify-between items-center border-b border-black pb-4 mb-4"
            >
              <div class="font-mono">Konzeptkunst</div>
              <div class="text-3xl text-green-600">36%</div>
            </div>
            <div
              class="flex justify-between items-center border-b border-black pb-4 mb-4"
            >
              <div class="font-mono">Konzeptkunst</div>
              <div class="text-3xl text-green-600">36%</div>
            </div>
            <div
              class="flex justify-between items-center border-b border-black pb-4 mb-4"
            >
              <div class="font-mono">Konzeptkunst</div>
              <div class="text-3xl text-green-600">36%</div>
            </div>
            <div
              class="flex justify-between items-center border-b border-black pb-4 mb-4"
            >
              <div class="font-mono">Konzeptkunst</div>
              <div class="text-3xl text-green-600">36%</div>
            </div>
            <div
              class="flex justify-between items-center border-b border-black pb-4 mb-4"
            >
              <div class="font-mono">Konzeptkunst</div>
              <div class="text-3xl text-green-600">36%</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- STATUS AND UPDATES -->
    <div class="container--default flex-auto max-w-full md:flex-shrink-0">
      <!-- STATUS -->
      <div class="md:w-80 lg:w-96">
        <div
          class="relative group cursor-pointer z-0 bg-green-500 py-3 sm:py-5 px-3 sm:px-5 lg:px-7 md:ml-1"
        >
          <!-- <div
            class="text-headline"
            [innerText]="
              'edition.status--application-ends-in'
                | translate
                  : { time: (edition$ | async)?.application_end | timePassed }
            "
          ></div> -->
          <a
            class="inline-block mt-4 font-mono text-black text-opacity-70"
            [routerLink]="[]"
            ><span class="group-hover:underline">Einstellungen</span> &rarr;</a
          >
          <div class="absolute font-mono top-0 right-full pr-1 md:pr-2">!</div>
        </div>
      </div>
    </div>
  </div>
  <footer class="container--default flex items-baseline justify-between">
    <div class="text-headline">Berlin Art Prize</div>
    <div class="space-x-8 flex">
      <button
        class="appearance-none font-mono underline hover:text-gray-800"
        [innerText]="'defaults.profile-single' | translate | titlecase"
      ></button>
      <button
        (click)="logout()"
        class="appearance-none font-mono underline hover:text-gray-800"
        [innerText]="'actions.logout' | translate | titlecase"
      ></button>
    </div>
  </footer>
</div>
